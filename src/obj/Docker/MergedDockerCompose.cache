networks:
  default:
    external: true
    name: base_devkit.net
services:
  devkit.file-store:
    build:
      context: F:\Source\Repos\devkit-microservice-framework\src
      dockerfile: apps/core/api/file-store/Devkit.FileStore/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: https://+:443;http://+:80
      ENABLE_SERVICE_REGISTRY: "true"
      ENABLE_SWAGGER: "true"
      LOG_INDEX: devkit.file-store
      LOG_SINK: elk
      SERVICE_BUS_TYPE: amqp
      SSL_CERT: ./https/aspnetapp.pfx
      SSL_PASSWORD: Passw0rd123$$
    image: devkit.file-store
    ports:
    - published: 8003
      target: 80
    - published: 44303
      target: 443
    volumes:
    - F:\Source\Repos\devkit-microservice-framework\src\configs\services\file-store-api:/app/configs:ro
    - F:\Source\Repos\devkit-microservice-framework\src\configs\infrastructure:/app/infrastructure:ro
    - F:\Source\Repos\devkit-microservice-framework\src\https:/app/https:rw
  devkit.gateway:
    build:
      context: F:\Source\Repos\devkit-microservice-framework\src
      dockerfile: apps/core/api/gateway/Devkit.Gateway/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_HTTPS_PORT: '44301'
      ASPNETCORE_URLS: https://+:443;http://+:80
      DEVKIT_GATEWAY_TYPE: mobile
      ENABLE_SERVICE_REGISTRY: "true"
      ENABLE_SWAGGER: "true"
      LOG_INDEX: devkit.gateway
      LOG_SINK: elk
      OCELOT_CONFIG_PATH: /app/configs/
      SERVICE_BUS_TYPE: amqp
      SSL_CERT: ./https/aspnetapp.pfx
      SSL_PASSWORD: Passw0rd123$$
    image: devkit.gateway
    ports:
    - published: 8001
      target: 80
    - published: 44301
      target: 443
    volumes:
    - F:\Source\Repos\devkit-microservice-framework\src\configs\gateway:/app/configs:ro
    - F:\Source\Repos\devkit-microservice-framework\src\configs\infrastructure:/app/infrastructure:ro
    - F:\Source\Repos\devkit-microservice-framework\src\https:/app/https:rw
  devkit.security:
    build:
      context: F:\Source\Repos\devkit-microservice-framework\src
      dockerfile: apps/core/api/security/Devkit.Security/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: https://+:443;http://+:80
      ENABLE_SERVICE_REGISTRY: "true"
      ENABLE_SWAGGER: "true"
      FACEBOOK_CLIENT_ID: Add Facebook client id
      FACEBOOK_SECRET: Add Facebook secret
      GOOGLE_CLIENT_ID: Add Google client id
      GOOGLE_SECRET: Add Google secret
      LOG_INDEX: devkit.security
      LOG_SINK: elk
      SERVICE_BUS_TYPE: amqp
      SSL_CERT: ./https/aspnetapp.pfx
      SSL_PASSWORD: Passw0rd123$$
    image: devkit.security
    ports:
    - published: 8002
      target: 80
    - published: 44302
      target: 443
    volumes:
    - F:\Source\Repos\devkit-microservice-framework\src\configs\services\security-api:/app/configs:ro
    - F:\Source\Repos\devkit-microservice-framework\src\configs\infrastructure:/app/infrastructure:ro
    - F:\Source\Repos\devkit-microservice-framework\src\https:/app/https:rw
version: '3.4'